import java.rmi.*;

public class MyClient{  
	
	public int total_clients = 5;
	public String my_name;
	
	public void lock(Adder node) throws RemoteException{
		int cur_time = node.getMyClock();
		cur_time += 1;
		node.setMyClock(cur_time);
		node.addqueue(new QueueElement(my_name,cur_time));
		String name = "myProg";
		for(int i=1;i<=total_clients;i++){
			String node_name = name + i;
			if(node_name != my_name){
				node.LockRequest(node_name);		
			}
		}
		int cur_acks = 0;
		while(cur_acks!=total_clients-1 || node.topqueue().name!=my_name){
			
		}
	}
	
	public void main(String args[]){  
		try{  
			Adder stub=new AdderRemote("myProg-" + args[0].toString()); 
			my_name = "myProg-" + args[0].toString();
			Naming.rebind("rmi://localhost:5000/myProg-" + args[0].toString(),stub);
		}catch(Exception e){
			
		}
	}
	
}  